<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,700&amp;subset=cyrillic" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&amp;subset=cyrillic" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;subset=cyrillic" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i|Tinos:400,400i&amp;subset=cyrillic"
		rel="stylesheet">

	<style>
		* {
			box-sizing: border-box;
		}

		body,
		html {
			height: 100%;
		}

		h1 {
			font-family: "Playfair Display";
			font-size: 30px;
			padding: 10px 0px;
			color: white;
			margin: 0px;
		}

		.field {
			margin-top: 50px;
			outline: 1px solid white;
		}

		body {
			background-color: rgb(0, 0, 0);
			text-align: center;
		}
	</style>
</head>

<body>

	<canvas class="field"></canvas>
	<script src="js/game.js"></script>
	<script src="js/map.js"></script>
	<script src="js/tile.js"></script>
	<script src="js/character.js"></script>
	<script src="js/util.js"></script>

	<script>
		const tileSize = 25;
		const rowsTilesCount = 25;
		const columnsTilesCount = 41;
		const canvas = document.querySelector('.field');
		const ctx = canvas.getContext('2d');

		let gameState = 'title';

		document.querySelector('html').onkeypress = function (e) {
			e.preventDefault();
			if (gameState == 'title') {

				game.startGame();
			}
			else if (gameState == 'running') {
				if (e.key == "w") {
					player.tryMove(0, -1);
				}
				if (e.key == "s") {
					player.tryMove(0, 1);
				}
				if (e.key == "a") {
					player.tryMove(-1, 0);
				}
				if (e.key == "d") {
					player.tryMove(1, 0);
				}
				if (e.code == 'Space') {
					player.attack();
				}
			}
			game.draw();
		}

		setInterval(game.draw, 20);
		game.setupCanvas();
		game.showTitle('Рогалик');

	</script>
</body>

</html>